!function(Q){var n={};function F(B){if(n[B])return n[B].exports;var U=n[B]={i:B,l:!1,exports:{}};return Q[B].call(U.exports,U,U.exports,F),U.l=!0,U.exports}F.m=Q,F.c=n,F.d=function(Q,n,B){F.o(Q,n)||Object.defineProperty(Q,n,{enumerable:!0,get:B})},F.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},F.t=function(Q,n){if(1&n&&(Q=F(Q)),8&n)return Q;if(4&n&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var B=Object.create(null);if(F.r(B),Object.defineProperty(B,"default",{enumerable:!0,value:Q}),2&n&&"string"!=typeof Q)for(var U in Q)F.d(B,U,function(n){return Q[n]}.bind(null,U));return B},F.n=function(Q){var n=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return F.d(n,"a",n),n},F.o=function(Q,n){return Object.prototype.hasOwnProperty.call(Q,n)},F.p="",F(F.s=12)}([function(module){eval('module.exports = {"columns":3,"images_count":40,"image_width":216,"image_height":144,"image_slides_count":5,"spin_time":5000,"prize_time":2000,"columns_stop_delay":1000,"loops":2,"need_same_images_to_win":2,"prize_animation_speed":80};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiIwLmpzIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n')},function(module,exports){eval("function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHkuanM/M2FmMCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfZGVmaW5lUHJvcGVydHk7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n")},function(module,exports){eval('function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError("Cannot call a class as a function");\n  }\n}\n\nmodule.exports = _classCallCheck;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2suanM/NDgzMiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9jbGFzc0NhbGxDaGVjazsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n')},function(module,exports){eval('function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if ("value" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MuanM/MzUzYSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsImZpbGUiOiIzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgcmV0dXJuIENvbnN0cnVjdG9yO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9jcmVhdGVDbGFzczsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3\n')},function(module,exports){eval("function quarticOut(t) {\n  return Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0\n}\n\nmodule.exports = quarticOut//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vbm9kZV9tb2R1bGVzL2Vhc2VzL3F1YXJ0LW91dC5qcz81MmFjIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQSIsImZpbGUiOiI0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gcXVhcnRpY091dCh0KSB7XG4gIHJldHVybiBNYXRoLnBvdyh0IC0gMS4wLCAzLjApICogKDEuMCAtIHQpICsgMS4wXG59XG5cbm1vZHVsZS5leHBvcnRzID0gcXVhcnRpY091dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4\n")},function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zdHlsZXMuc2Nzcz9jN2IyIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5\n")},function(module,exports,__webpack_require__){eval('var map = {\n\t"./symbolA.png": 7,\n\t"./symbolB.png": 8,\n\t"./symbolC.png": 9,\n\t"./symbolD.png": 10,\n\t"./symbolE.png": 11\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error("Cannot find module \'" + req + "\'");\n\t\te.code = \'MODULE_NOT_FOUND\';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 6;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvaW1hZ2VzIHN5bmMgbm9ucmVjdXJzaXZlIC4rXFwucG5nJD9lZGZiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbWFwID0ge1xuXHRcIi4vc3ltYm9sQS5wbmdcIjogNyxcblx0XCIuL3N5bWJvbEIucG5nXCI6IDgsXG5cdFwiLi9zeW1ib2xDLnBuZ1wiOiA5LFxuXHRcIi4vc3ltYm9sRC5wbmdcIjogMTAsXG5cdFwiLi9zeW1ib2xFLnBuZ1wiOiAxMVxufTtcblxuXG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dChyZXEpIHtcblx0dmFyIGlkID0gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSk7XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKGlkKTtcbn1cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpIHtcblx0dmFyIGlkID0gbWFwW3JlcV07XG5cdGlmKCEoaWQgKyAxKSkgeyAvLyBjaGVjayBmb3IgbnVtYmVyIG9yIHN0cmluZ1xuXHRcdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0XHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdFx0dGhyb3cgZTtcblx0fVxuXHRyZXR1cm4gaWQ7XG59XG53ZWJwYWNrQ29udGV4dC5rZXlzID0gZnVuY3Rpb24gd2VicGFja0NvbnRleHRLZXlzKCkge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMobWFwKTtcbn07XG53ZWJwYWNrQ29udGV4dC5yZXNvbHZlID0gd2VicGFja0NvbnRleHRSZXNvbHZlO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQ29udGV4dDtcbndlYnBhY2tDb250ZXh0LmlkID0gNjsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///6\n')},function(module,exports,__webpack_require__){eval('module.exports = __webpack_require__.p + "e56f62cca030f5a7de29fff0dc88facd.png";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvaW1hZ2VzL3N5bWJvbEEucG5nP2Y3NmIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsaUJBQWlCLHFCQUF1QiIsImZpbGUiOiI3LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZTU2ZjYyY2NhMDMwZjVhN2RlMjlmZmYwZGM4OGZhY2QucG5nXCI7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///7\n')},function(module,exports,__webpack_require__){eval('module.exports = __webpack_require__.p + "48fb9a0bbbea67b9401e894ba677eaed.png";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvaW1hZ2VzL3N5bWJvbEIucG5nPzZjOGIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsaUJBQWlCLHFCQUF1QiIsImZpbGUiOiI4LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiNDhmYjlhMGJiYmVhNjdiOTQwMWU4OTRiYTY3N2VhZWQucG5nXCI7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8\n')},function(module,exports,__webpack_require__){eval('module.exports = __webpack_require__.p + "00a6b305cca5e69e6b6da6a0a2f8aa24.png";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvaW1hZ2VzL3N5bWJvbEMucG5nPzNlOGQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsaUJBQWlCLHFCQUF1QiIsImZpbGUiOiI5LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiMDBhNmIzMDVjY2E1ZTY5ZTZiNmRhNmEwYTJmOGFhMjQucG5nXCI7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///9\n')},function(module,exports,__webpack_require__){eval('module.exports = __webpack_require__.p + "b8654012268514a35b48ce02bb3f43db.png";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvaW1hZ2VzL3N5bWJvbEQucG5nPzE4NTIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsaUJBQWlCLHFCQUF1QiIsImZpbGUiOiIxMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImI4NjU0MDEyMjY4NTE0YTM1YjQ4Y2UwMmJiM2Y0M2RiLnBuZ1wiOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///10\n')},function(module,exports,__webpack_require__){eval('module.exports = __webpack_require__.p + "bf73eff6f6c8f19470a3f613399935da.png";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvaW1hZ2VzL3N5bWJvbEUucG5nP2QyMTkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsaUJBQWlCLHFCQUF1QiIsImZpbGUiOiIxMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImJmNzNlZmY2ZjZjOGYxOTQ3MGEzZjYxMzM5OTkzNWRhLnBuZ1wiOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///11\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./styles.scss\nvar styles = __webpack_require__(5);\n\n// EXTERNAL MODULE: ../node_modules/@babel/runtime/helpers/classCallCheck.js\nvar classCallCheck = __webpack_require__(2);\nvar classCallCheck_default = /*#__PURE__*/__webpack_require__.n(classCallCheck);\n\n// EXTERNAL MODULE: ../node_modules/@babel/runtime/helpers/createClass.js\nvar createClass = __webpack_require__(3);\nvar createClass_default = /*#__PURE__*/__webpack_require__.n(createClass);\n\n// EXTERNAL MODULE: ../node_modules/@babel/runtime/helpers/defineProperty.js\nvar defineProperty = __webpack_require__(1);\nvar defineProperty_default = /*#__PURE__*/__webpack_require__.n(defineProperty);\n\n// EXTERNAL MODULE: ./config.json\nvar config = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./app/image.ts\n\n\n\n\n\nvar columnHeight = config.images_count * config.image_height;\nvar caches = {};\n\nfunction getImage(url) {\n  if (caches[url]) {\n    return Promise.resolve(caches[url]);\n  }\n\n  return new Promise(function (res, rej) {\n    var image = new Image();\n\n    image.onload = function () {\n      caches[url] = image;\n      res(image);\n    };\n\n    image.src = url;\n  });\n}\n\nvar image_SlotImage =\n/*#__PURE__*/\nfunction () {\n  function SlotImage(options) {\n    classCallCheck_default()(this, SlotImage);\n\n    defineProperty_default()(this, "options", void 0);\n\n    defineProperty_default()(this, "spritePosition", 0);\n\n    defineProperty_default()(this, "lastUpdate", 0);\n\n    defineProperty_default()(this, "offset", 0);\n\n    this.options = options;\n    this.initImage();\n  }\n\n  createClass_default()(SlotImage, [{\n    key: "initImage",\n    value: function initImage() {\n      getImage(this.options.url);\n    }\n  }, {\n    key: "getPosition",\n    value: function getPosition() {\n      var topWithOffset = (columnHeight + (this.options.top - this.offset) % columnHeight) % columnHeight;\n      return {\n        left: this.options.left,\n        top: -topWithOffset + config.image_height\n      };\n    }\n  }, {\n    key: "setOffset",\n    value: function setOffset(offset) {\n      this.offset = offset;\n    }\n  }, {\n    key: "getUrl",\n    value: function getUrl() {\n      return this.options.url;\n    }\n  }, {\n    key: "render",\n    value: function render(state, time) {\n      var _this = this;\n\n      if (state === AppState.Prize) {\n        this.updateSpritePosition(time);\n      }\n\n      if (state === AppState.Stop) {\n        this.spritePosition = 0;\n        this.lastUpdate = 0;\n      }\n\n      var _this$getPosition = this.getPosition(),\n          left = _this$getPosition.left,\n          top = _this$getPosition.top;\n\n      getImage(this.options.url).then(function (img) {\n        return _this.options.ctx.drawImage(img, _this.spritePosition, 0, config.image_width, config.image_height, left, top, config.image_width, config.image_height);\n      });\n    }\n  }, {\n    key: "updateSpritePosition",\n    value: function updateSpritePosition(time) {\n      var lastUpdateDiff = (time - this.lastUpdate) / config.prize_animation_speed;\n\n      if (lastUpdateDiff > 1) {\n        this.lastUpdate = time;\n        this.spritePosition += config.image_width;\n\n        if (this.spritePosition / config.image_width >= config.image_slides_count) {\n          this.spritePosition = 0;\n        }\n      }\n    }\n  }]);\n\n  return SlotImage;\n}();\n\n\n// CONCATENATED MODULE: ./app/utils.ts\nvar delay = function delay(time) {\n  return new Promise(function (res) {\n    return setTimeout(res, time);\n  });\n};\nvar random = function random(start, finish) {\n  var range = finish - start;\n  return Math.round(Math.random() * range) + start;\n};\n// EXTERNAL MODULE: ../node_modules/eases/quart-out.js\nvar quart_out = __webpack_require__(4);\nvar quart_out_default = /*#__PURE__*/__webpack_require__.n(quart_out);\n\n// CONCATENATED MODULE: ./app/column.ts\n\n\n\n\n\n\n\n\nvar context = __webpack_require__(6);\n\nvar column_images = context.keys();\nvar imageCount = Math.ceil(config.images_count / column_images.length);\nvar column_columnHeight = config.images_count * config.image_height;\nvar overallDistance = column_columnHeight * config.loops;\n\nvar column_Column =\n/*#__PURE__*/\nfunction () {\n  function Column(options) {\n    classCallCheck_default()(this, Column);\n\n    defineProperty_default()(this, "items", []);\n\n    defineProperty_default()(this, "notFilled", {});\n\n    defineProperty_default()(this, "result", 1);\n\n    defineProperty_default()(this, "resultOffset", 0);\n\n    defineProperty_default()(this, "index", void 0);\n\n    defineProperty_default()(this, "startOffset", 0);\n\n    for (var i = 0; i < column_images.length; i++) {\n      this.notFilled[column_images[i]] = 0;\n    }\n\n    this.index = options.index;\n\n    for (var _i = 0; _i < config.images_count; _i++) {\n      this.items.push(new image_SlotImage({\n        left: options.left,\n        top: _i * config.image_height,\n        url: context(this.getImageName()),\n        ctx: options.ctx\n      }));\n    }\n  }\n\n  createClass_default()(Column, [{\n    key: "getImageName",\n    value: function getImageName() {\n      var notFilledKeys = Object.keys(this.notFilled);\n      var index = random(0, notFilledKeys.length - 1);\n      var imageName = notFilledKeys[index];\n      this.notFilled[imageName]++;\n\n      if (this.notFilled[imageName] >= imageCount) {\n        delete this.notFilled[imageName];\n      }\n\n      return imageName;\n    }\n  }, {\n    key: "getResult",\n    value: function getResult() {\n      var prevResult = this.result;\n      this.result = random(0, config.images_count - 1);\n      this.resultOffset = (this.result - prevResult) * config.image_height;\n      return this.items[this.result].getUrl();\n    }\n  }, {\n    key: "stop",\n    value: function stop() {\n      this.startOffset += this.resultOffset;\n      this.resultOffset = 0;\n    }\n  }, {\n    key: "render",\n    value: function render(state, time) {\n      var _this = this;\n\n      var offset = this.getOffset(time);\n      this.items.forEach(function (item, i) {\n        item.setOffset(offset);\n\n        if (_this.needToRenderItem(item)) {\n          item.render(state, time);\n        }\n      });\n    }\n  }, {\n    key: "getOffset",\n    value: function getOffset(time) {\n      var overallTime = time / (config.spin_time - (config.columns - this.index - 1) * config.columns_stop_delay);\n\n      if (overallTime > 1) {\n        overallTime = 1;\n      }\n\n      return (this.startOffset + (overallDistance + this.resultOffset) * quart_out_default()(overallTime)) % column_columnHeight;\n    }\n  }, {\n    key: "needToRenderItem",\n    value: function needToRenderItem(item) {\n      var _item$getPosition = item.getPosition(),\n          top = _item$getPosition.top;\n\n      return this.isPointVisible(top) || this.isPointVisible(top + config.image_height - 1);\n    }\n  }, {\n    key: "isPointVisible",\n    value: function isPointVisible(y) {\n      return y >= 0 && y < config.image_height;\n    }\n  }]);\n\n  return Column;\n}();\n\n\n// CONCATENATED MODULE: ./app/app.ts\n\n\n\n\n\n\nvar AppState;\n\n(function (AppState) {\n  AppState["Stop"] = "stop";\n  AppState["Spin"] = "spin";\n  AppState["Prize"] = "prize";\n})(AppState || (AppState = {}));\n\nvar app_Slot =\n/*#__PURE__*/\nfunction () {\n  function Slot(selector) {\n    var _this = this;\n\n    classCallCheck_default()(this, Slot);\n\n    defineProperty_default()(this, "columns", []);\n\n    defineProperty_default()(this, "width", void 0);\n\n    defineProperty_default()(this, "canvas", void 0);\n\n    defineProperty_default()(this, "state", AppState.Stop);\n\n    defineProperty_default()(this, "phaseStartTimestamp", 0);\n\n    defineProperty_default()(this, "render", function () {\n      if (!_this.canvas) {\n        return;\n      }\n\n      var time = _this.phaseStartTimestamp ? Date.now() - _this.phaseStartTimestamp : 0;\n\n      var ctx = _this.canvas.getContext(\'2d\');\n\n      ctx.clearRect(0, 0, _this.canvas.width, _this.canvas.height);\n\n      _this.columns.forEach(function (column) {\n        return column.render(_this.state, time);\n      });\n\n      if (_this.state !== AppState.Stop) {\n        window.requestAnimationFrame(_this.render);\n      }\n    });\n\n    this.width = 0;\n    this.canvas = document.querySelector(selector);\n\n    if (!this.canvas) {\n      return;\n    }\n\n    for (var i = 0; i < config.columns; i++) {\n      var column = new column_Column({\n        index: i,\n        left: this.width,\n        ctx: this.canvas.getContext(\'2d\')\n      });\n      this.width += config.image_width;\n      this.columns.push(column);\n    }\n\n    this.canvas.style.width = this.width + \'px\';\n    this.canvas.style.height = config.image_height + \'px\';\n    this.canvas.width = this.width;\n    this.canvas.height = config.image_height;\n    this.render();\n  }\n\n  createClass_default()(Slot, [{\n    key: "start",\n    value: function start() {\n      var _this2 = this;\n\n      return new Promise(function (resolve) {\n        _this2.state = AppState.Spin;\n        _this2.phaseStartTimestamp = Date.now();\n        var hasPrize = _this2.columns.map(function (col) {\n          return col.getResult();\n        }).reduce(function (acc, colResult) {\n          return acc.add(colResult);\n        }, new Set()).size === config.columns - config.need_same_images_to_win + 1;\n        delay(config.spin_time).then(function () {\n          _this2.state = hasPrize ? AppState.Prize : AppState.Stop;\n\n          _this2.columns.forEach(function (col) {\n            return col.stop();\n          });\n\n          return hasPrize ? delay(config.prize_time) : Promise.resolve(null);\n        }).then(function () {\n          _this2.state = AppState.Stop;\n          resolve();\n        });\n\n        _this2.render();\n      });\n    }\n  }]);\n\n  return Slot;\n}();\n\n\n// CONCATENATED MODULE: ./main.ts\n\n\nwindow.addEventListener(\'load\', function () {\n  var el = document.querySelector(\'button\');\n  var slot = new app_Slot(\'#app\');\n\n  if (el) {\n    el.addEventListener(\'click\', function () {\n      el.disabled = true;\n      slot.start().then(function () {\n        return el.disabled = false;\n      });\n    });\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvaW1hZ2UudHM/NzRlNCIsIndlYnBhY2s6Ly8vLi9hcHAvdXRpbHMudHM/YWZmNCIsIndlYnBhY2s6Ly8vLi9hcHAvY29sdW1uLnRzPzM1YTIiLCJ3ZWJwYWNrOi8vLy4vYXBwL2FwcC50cz83YmE2Iiwid2VicGFjazovLy8uL21haW4udHM/ODI2OSJdLCJuYW1lcyI6WyJjb2x1bW5IZWlnaHQiLCJjb25maWciLCJpbWFnZXNfY291bnQiLCJpbWFnZV9oZWlnaHQiLCJjYWNoZXMiLCJnZXRJbWFnZSIsInVybCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVzIiwicmVqIiwiaW1hZ2UiLCJJbWFnZSIsIm9ubG9hZCIsInNyYyIsIlNsb3RJbWFnZSIsIm9wdGlvbnMiLCJpbml0SW1hZ2UiLCJ0b3BXaXRoT2Zmc2V0IiwidG9wIiwib2Zmc2V0IiwibGVmdCIsInN0YXRlIiwidGltZSIsIkFwcFN0YXRlIiwiUHJpemUiLCJ1cGRhdGVTcHJpdGVQb3NpdGlvbiIsIlN0b3AiLCJzcHJpdGVQb3NpdGlvbiIsImxhc3RVcGRhdGUiLCJnZXRQb3NpdGlvbiIsInRoZW4iLCJpbWciLCJjdHgiLCJkcmF3SW1hZ2UiLCJpbWFnZV93aWR0aCIsImxhc3RVcGRhdGVEaWZmIiwicHJpemVfYW5pbWF0aW9uX3NwZWVkIiwiaW1hZ2Vfc2xpZGVzX2NvdW50IiwiZGVsYXkiLCJzZXRUaW1lb3V0IiwicmFuZG9tIiwic3RhcnQiLCJmaW5pc2giLCJyYW5nZSIsIk1hdGgiLCJyb3VuZCIsImNvbnRleHQiLCJyZXF1aXJlIiwiaW1hZ2VzIiwia2V5cyIsImltYWdlQ291bnQiLCJjZWlsIiwibGVuZ3RoIiwib3ZlcmFsbERpc3RhbmNlIiwibG9vcHMiLCJDb2x1bW4iLCJpIiwibm90RmlsbGVkIiwiaW5kZXgiLCJpdGVtcyIsInB1c2giLCJnZXRJbWFnZU5hbWUiLCJub3RGaWxsZWRLZXlzIiwiT2JqZWN0IiwiaW1hZ2VOYW1lIiwicHJldlJlc3VsdCIsInJlc3VsdCIsInJlc3VsdE9mZnNldCIsImdldFVybCIsInN0YXJ0T2Zmc2V0IiwiZ2V0T2Zmc2V0IiwiZm9yRWFjaCIsIml0ZW0iLCJzZXRPZmZzZXQiLCJuZWVkVG9SZW5kZXJJdGVtIiwicmVuZGVyIiwib3ZlcmFsbFRpbWUiLCJzcGluX3RpbWUiLCJjb2x1bW5zIiwiY29sdW1uc19zdG9wX2RlbGF5IiwiZWFzaW5nIiwiaXNQb2ludFZpc2libGUiLCJ5IiwiU2xvdCIsInNlbGVjdG9yIiwiY2FudmFzIiwicGhhc2VTdGFydFRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJnZXRDb250ZXh0IiwiY2xlYXJSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJjb2x1bW4iLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzdHlsZSIsIlNwaW4iLCJoYXNQcml6ZSIsIm1hcCIsImNvbCIsImdldFJlc3VsdCIsInJlZHVjZSIsImFjYyIsImNvbFJlc3VsdCIsImFkZCIsIlNldCIsInNpemUiLCJuZWVkX3NhbWVfaW1hZ2VzX3RvX3dpbiIsInN0b3AiLCJwcml6ZV90aW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsImVsIiwic2xvdCIsImRpc2FibGVkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBRUEsSUFBTUEsWUFBWSxHQUFHQyxNQUFNLENBQUNDLFlBQVAsR0FBc0JELE1BQU0sQ0FBQ0UsWUFBbEQ7QUFrQkEsSUFBTUMsTUFBa0IsR0FBRyxFQUEzQjs7QUFFQSxTQUFTQyxRQUFULENBQWtCQyxHQUFsQixFQUEwRDtBQUN4RCxNQUFJRixNQUFNLENBQUNFLEdBQUQsQ0FBVixFQUFpQjtBQUNmLFdBQU9DLE9BQU8sQ0FBQ0MsT0FBUixDQUFnQkosTUFBTSxDQUFDRSxHQUFELENBQXRCLENBQVA7QUFDRDs7QUFFRCxTQUFPLElBQUlDLE9BQUosQ0FBWSxVQUFDRSxHQUFELEVBQU1DLEdBQU4sRUFBYztBQUMvQixRQUFNQyxLQUFLLEdBQUcsSUFBSUMsS0FBSixFQUFkOztBQUVBRCxTQUFLLENBQUNFLE1BQU4sR0FBZSxZQUFNO0FBQ25CVCxZQUFNLENBQUNFLEdBQUQsQ0FBTixHQUFjSyxLQUFkO0FBQ0FGLFNBQUcsQ0FBQ0UsS0FBRCxDQUFIO0FBQ0QsS0FIRDs7QUFJQUEsU0FBSyxDQUFDRyxHQUFOLEdBQVlSLEdBQVo7QUFDRCxHQVJNLENBQVA7QUFVRDs7SUFFb0JTLGU7OztBQU1uQixxQkFBWUMsT0FBWixFQUFtQztBQUFBOztBQUFBOztBQUFBLHFEQUpGLENBSUU7O0FBQUEsaURBSE4sQ0FHTTs7QUFBQSw2Q0FGVixDQUVVOztBQUNqQyxTQUFLQSxPQUFMLEdBQWVBLE9BQWY7QUFFQSxTQUFLQyxTQUFMO0FBQ0Q7Ozs7Z0NBRXlCO0FBQ3hCWixjQUFRLENBQUMsS0FBS1csT0FBTCxDQUFhVixHQUFkLENBQVI7QUFDRDs7O2tDQUU4QjtBQUM3QixVQUFNWSxhQUFhLEdBQUcsQ0FBQ2xCLFlBQVksR0FBRyxDQUFDLEtBQUtnQixPQUFMLENBQWFHLEdBQWIsR0FBbUIsS0FBS0MsTUFBekIsSUFBbUNwQixZQUFuRCxJQUFtRUEsWUFBekY7QUFFQSxhQUFPO0FBQ0xxQixZQUFJLEVBQUUsS0FBS0wsT0FBTCxDQUFhSyxJQURkO0FBRUxGLFdBQUcsRUFBRSxDQUFDRCxhQUFELEdBQWlCakIsTUFBTSxDQUFDRTtBQUZ4QixPQUFQO0FBSUQ7Ozs4QkFFZ0JpQixNLEVBQXNCO0FBQ3JDLFdBQUtBLE1BQUwsR0FBY0EsTUFBZDtBQUNEOzs7NkJBRXVCO0FBQ3RCLGFBQU8sS0FBS0osT0FBTCxDQUFhVixHQUFwQjtBQUNEOzs7MkJBRWFnQixLLEVBQWlCQyxJLEVBQW9CO0FBQUE7O0FBQ2pELFVBQUlELEtBQUssS0FBS0UsUUFBUSxDQUFDQyxLQUF2QixFQUE4QjtBQUM1QixhQUFLQyxvQkFBTCxDQUEwQkgsSUFBMUI7QUFDRDs7QUFDRCxVQUFJRCxLQUFLLEtBQUtFLFFBQVEsQ0FBQ0csSUFBdkIsRUFBNkI7QUFDM0IsYUFBS0MsY0FBTCxHQUFzQixDQUF0QjtBQUNBLGFBQUtDLFVBQUwsR0FBa0IsQ0FBbEI7QUFDRDs7QUFQZ0QsOEJBUzdCLEtBQUtDLFdBQUwsRUFUNkI7QUFBQSxVQVMxQ1QsSUFUMEMscUJBUzFDQSxJQVQwQztBQUFBLFVBU3BDRixHQVRvQyxxQkFTcENBLEdBVG9DOztBQVdqRGQsY0FBUSxDQUFDLEtBQUtXLE9BQUwsQ0FBYVYsR0FBZCxDQUFSLENBQTJCeUIsSUFBM0IsQ0FBZ0MsVUFBQUMsR0FBRztBQUFBLGVBQ2pDLEtBQUksQ0FBQ2hCLE9BQUwsQ0FBYWlCLEdBQWIsQ0FBaUJDLFNBQWpCLENBQ0VGLEdBREYsRUFFRSxLQUFJLENBQUNKLGNBRlAsRUFHRSxDQUhGLEVBSUUzQixNQUFNLENBQUNrQyxXQUpULEVBS0VsQyxNQUFNLENBQUNFLFlBTFQsRUFNRWtCLElBTkYsRUFPRUYsR0FQRixFQVFFbEIsTUFBTSxDQUFDa0MsV0FSVCxFQVNFbEMsTUFBTSxDQUFDRSxZQVRULENBRGlDO0FBQUEsT0FBbkM7QUFhRDs7O3lDQUU0Qm9CLEksRUFBb0I7QUFDL0MsVUFBTWEsY0FBc0IsR0FBRyxDQUFDYixJQUFJLEdBQUcsS0FBS00sVUFBYixJQUEyQjVCLE1BQU0sQ0FBQ29DLHFCQUFqRTs7QUFFQSxVQUFJRCxjQUFjLEdBQUcsQ0FBckIsRUFBd0I7QUFDdEIsYUFBS1AsVUFBTCxHQUFrQk4sSUFBbEI7QUFDQSxhQUFLSyxjQUFMLElBQXVCM0IsTUFBTSxDQUFDa0MsV0FBOUI7O0FBRUEsWUFBSSxLQUFLUCxjQUFMLEdBQXNCM0IsTUFBTSxDQUFDa0MsV0FBN0IsSUFBNENsQyxNQUFNLENBQUNxQyxrQkFBdkQsRUFBMkU7QUFDekUsZUFBS1YsY0FBTCxHQUFzQixDQUF0QjtBQUNEO0FBQ0Y7QUFDRjs7Ozs7Ozs7QUM5R0ksSUFBTVcsS0FBSyxHQUFHLFNBQVJBLEtBQVEsQ0FBQ2hCLElBQUQsRUFBaUM7QUFDcEQsU0FBTyxJQUFJaEIsT0FBSixDQUFZLFVBQUFFLEdBQUc7QUFBQSxXQUFJK0IsVUFBVSxDQUFDL0IsR0FBRCxFQUFNYyxJQUFOLENBQWQ7QUFBQSxHQUFmLENBQVA7QUFDRCxDQUZNO0FBSUEsSUFBTWtCLE1BQU0sR0FBRyxTQUFUQSxNQUFTLENBQUNDLEtBQUQsRUFBZUMsTUFBZixFQUF5QztBQUM3RCxNQUFNQyxLQUFLLEdBQUdELE1BQU0sR0FBR0QsS0FBdkI7QUFFQSxTQUFPRyxJQUFJLENBQUNDLEtBQUwsQ0FBV0QsSUFBSSxDQUFDSixNQUFMLEtBQWdCRyxLQUEzQixJQUFvQ0YsS0FBM0M7QUFDRCxDQUpNLEM7Ozs7Ozs7OztBQ0pQO0FBQ0E7QUFFQTtBQUNBOztBQUVBLElBQU1LLE9BQU8sR0FBR0Msc0JBQWhCOztBQUNBLElBQU1DLGFBQU0sR0FBR0YsT0FBTyxDQUFDRyxJQUFSLEVBQWY7QUFDQSxJQUFNQyxVQUFVLEdBQUdOLElBQUksQ0FBQ08sSUFBTCxDQUFVbkQsTUFBTSxDQUFDQyxZQUFQLEdBQXNCK0MsYUFBTSxDQUFDSSxNQUF2QyxDQUFuQjtBQUNBLElBQU1yRCxtQkFBWSxHQUFHQyxNQUFNLENBQUNDLFlBQVAsR0FBc0JELE1BQU0sQ0FBQ0UsWUFBbEQ7QUFDQSxJQUFNbUQsZUFBZSxHQUFHdEQsbUJBQVksR0FBR0MsTUFBTSxDQUFDc0QsS0FBOUM7O0lBUXFCQyxhOzs7QUFRbkIsa0JBQW1CeEMsT0FBbkIsRUFBMkM7QUFBQTs7QUFBQSw0Q0FQZCxFQU9jOztBQUFBLGdEQU5WLEVBTVU7O0FBQUEsNkNBTGxCLENBS2tCOztBQUFBLG1EQUpaLENBSVk7O0FBQUE7O0FBQUEsa0RBRmIsQ0FFYTs7QUFDekMsU0FBSyxJQUFJeUMsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR1IsYUFBTSxDQUFDSSxNQUEzQixFQUFtQ0ksQ0FBQyxFQUFwQyxFQUF3QztBQUN0QyxXQUFLQyxTQUFMLENBQWVULGFBQU0sQ0FBQ1EsQ0FBRCxDQUFyQixJQUE0QixDQUE1QjtBQUNEOztBQUVELFNBQUtFLEtBQUwsR0FBYTNDLE9BQU8sQ0FBQzJDLEtBQXJCOztBQUVBLFNBQUssSUFBSUYsRUFBQyxHQUFHLENBQWIsRUFBZ0JBLEVBQUMsR0FBR3hELE1BQU0sQ0FBQ0MsWUFBM0IsRUFBeUN1RCxFQUFDLEVBQTFDLEVBQThDO0FBQzVDLFdBQUtHLEtBQUwsQ0FBV0MsSUFBWCxDQUNFLElBQUk5QyxlQUFKLENBQWM7QUFDWk0sWUFBSSxFQUFFTCxPQUFPLENBQUNLLElBREY7QUFFWkYsV0FBRyxFQUFFc0MsRUFBQyxHQUFHeEQsTUFBTSxDQUFDRSxZQUZKO0FBR1pHLFdBQUcsRUFBRXlDLE9BQU8sQ0FBQyxLQUFLZSxZQUFMLEVBQUQsQ0FIQTtBQUlaN0IsV0FBRyxFQUFFakIsT0FBTyxDQUFDaUI7QUFKRCxPQUFkLENBREY7QUFRRDtBQUNGOzs7O21DQUU4QjtBQUM3QixVQUFJOEIsYUFBYSxHQUFHQyxNQUFNLENBQUNkLElBQVAsQ0FBWSxLQUFLUSxTQUFqQixDQUFwQjtBQUNBLFVBQUlDLEtBQUssR0FBR2xCLE1BQU0sQ0FBQyxDQUFELEVBQUlzQixhQUFhLENBQUNWLE1BQWQsR0FBdUIsQ0FBM0IsQ0FBbEI7QUFDQSxVQUFJWSxTQUFTLEdBQUdGLGFBQWEsQ0FBQ0osS0FBRCxDQUE3QjtBQUVBLFdBQUtELFNBQUwsQ0FBZU8sU0FBZjs7QUFFQSxVQUFJLEtBQUtQLFNBQUwsQ0FBZU8sU0FBZixLQUE2QmQsVUFBakMsRUFBNkM7QUFDM0MsZUFBTyxLQUFLTyxTQUFMLENBQWVPLFNBQWYsQ0FBUDtBQUNEOztBQUVELGFBQU9BLFNBQVA7QUFDRDs7O2dDQUUwQjtBQUN6QixVQUFNQyxVQUFVLEdBQUcsS0FBS0MsTUFBeEI7QUFFQSxXQUFLQSxNQUFMLEdBQWMxQixNQUFNLENBQUMsQ0FBRCxFQUFJeEMsTUFBTSxDQUFDQyxZQUFQLEdBQXNCLENBQTFCLENBQXBCO0FBQ0EsV0FBS2tFLFlBQUwsR0FBb0IsQ0FBQyxLQUFLRCxNQUFMLEdBQWNELFVBQWYsSUFBNkJqRSxNQUFNLENBQUNFLFlBQXhEO0FBRUEsYUFBTyxLQUFLeUQsS0FBTCxDQUFXLEtBQUtPLE1BQWhCLEVBQXdCRSxNQUF4QixFQUFQO0FBQ0Q7OzsyQkFFbUI7QUFDbEIsV0FBS0MsV0FBTCxJQUFvQixLQUFLRixZQUF6QjtBQUNBLFdBQUtBLFlBQUwsR0FBb0IsQ0FBcEI7QUFDRDs7OzJCQUVhOUMsSyxFQUFpQkMsSSxFQUFvQjtBQUFBOztBQUNqRCxVQUFNSCxNQUFNLEdBQUcsS0FBS21ELFNBQUwsQ0FBZWhELElBQWYsQ0FBZjtBQUVBLFdBQUtxQyxLQUFMLENBQVdZLE9BQVgsQ0FBbUIsVUFBQ0MsSUFBRCxFQUFPaEIsQ0FBUCxFQUFhO0FBQzlCZ0IsWUFBSSxDQUFDQyxTQUFMLENBQWV0RCxNQUFmOztBQUNBLFlBQUksS0FBSSxDQUFDdUQsZ0JBQUwsQ0FBc0JGLElBQXRCLENBQUosRUFBaUM7QUFDL0JBLGNBQUksQ0FBQ0csTUFBTCxDQUNFdEQsS0FERixFQUVFQyxJQUZGO0FBSUQ7QUFDRixPQVJEO0FBU0Q7Ozs4QkFFaUJBLEksRUFBc0I7QUFDdEMsVUFBSXNELFdBQVcsR0FBR3RELElBQUksSUFBSXRCLE1BQU0sQ0FBQzZFLFNBQVAsR0FBbUIsQ0FBQzdFLE1BQU0sQ0FBQzhFLE9BQVAsR0FBaUIsS0FBS3BCLEtBQXRCLEdBQThCLENBQS9CLElBQW9DMUQsTUFBTSxDQUFDK0Usa0JBQWxFLENBQXRCOztBQUVBLFVBQUlILFdBQVcsR0FBRyxDQUFsQixFQUFxQjtBQUNuQkEsbUJBQVcsR0FBRyxDQUFkO0FBQ0Q7O0FBRUQsYUFBTyxDQUFDLEtBQUtQLFdBQUwsR0FBbUIsQ0FBQ2hCLGVBQWUsR0FBRyxLQUFLYyxZQUF4QixJQUF5Q2EsbUJBQU0sQ0FBQ0osV0FBRCxDQUFuRSxJQUFvRjdFLG1CQUEzRjtBQUNEOzs7cUNBRXdCeUUsSSxFQUEwQjtBQUFBLDhCQUNuQ0EsSUFBSSxDQUFDM0MsV0FBTCxFQURtQztBQUFBLFVBQzFDWCxHQUQwQyxxQkFDMUNBLEdBRDBDOztBQUdqRCxhQUNFLEtBQUsrRCxjQUFMLENBQW9CL0QsR0FBcEIsS0FDQSxLQUFLK0QsY0FBTCxDQUFvQi9ELEdBQUcsR0FBR2xCLE1BQU0sQ0FBQ0UsWUFBYixHQUE0QixDQUFoRCxDQUZGO0FBSUQ7OzttQ0FFc0JnRixDLEVBQW9CO0FBQ3pDLGFBQU9BLENBQUMsSUFBSSxDQUFMLElBQVVBLENBQUMsR0FBR2xGLE1BQU0sQ0FBQ0UsWUFBNUI7QUFDRDs7Ozs7Ozs7Ozs7QUM1R0g7QUFDQTtBQUNBO0FBRU8sSUFBS3FCLFFBQVo7O1dBQVlBLFE7QUFBQUEsVTtBQUFBQSxVO0FBQUFBLFU7R0FBQUEsUSxLQUFBQSxROztJQU1TNEQsUTs7O0FBT25CLGdCQUFZQyxRQUFaLEVBQThCO0FBQUE7O0FBQUE7O0FBQUEsOENBTkYsRUFNRTs7QUFBQTs7QUFBQTs7QUFBQSw0Q0FISjdELFFBQVEsQ0FBQ0csSUFHTDs7QUFBQSwwREFGUSxDQUVSOztBQUFBLDZDQW1EZCxZQUFZO0FBQzFCLFVBQUksQ0FBQyxLQUFJLENBQUMyRCxNQUFWLEVBQWtCO0FBQ2hCO0FBQ0Q7O0FBRUQsVUFBTS9ELElBQUksR0FBRyxLQUFJLENBQUNnRSxtQkFBTCxHQUEyQkMsSUFBSSxDQUFDQyxHQUFMLEtBQWEsS0FBSSxDQUFDRixtQkFBN0MsR0FBbUUsQ0FBaEY7O0FBQ0EsVUFBTXRELEdBQUcsR0FBRyxLQUFJLENBQUNxRCxNQUFMLENBQVlJLFVBQVosQ0FBdUIsSUFBdkIsQ0FBWjs7QUFFQXpELFNBQUcsQ0FBQzBELFNBQUosQ0FBYyxDQUFkLEVBQWlCLENBQWpCLEVBQW9CLEtBQUksQ0FBQ0wsTUFBTCxDQUFZTSxLQUFoQyxFQUF1QyxLQUFJLENBQUNOLE1BQUwsQ0FBWU8sTUFBbkQ7O0FBRUEsV0FBSSxDQUFDZCxPQUFMLENBQWFQLE9BQWIsQ0FBcUIsVUFBQXNCLE1BQU07QUFBQSxlQUFJQSxNQUFNLENBQUNsQixNQUFQLENBQWMsS0FBSSxDQUFDdEQsS0FBbkIsRUFBMEJDLElBQTFCLENBQUo7QUFBQSxPQUEzQjs7QUFFQSxVQUFJLEtBQUksQ0FBQ0QsS0FBTCxLQUFlRSxRQUFRLENBQUNHLElBQTVCLEVBQWtDO0FBQ2hDb0UsY0FBTSxDQUFDQyxxQkFBUCxDQUE2QixLQUFJLENBQUNwQixNQUFsQztBQUNEO0FBQ0YsS0FsRTZCOztBQUM1QixTQUFLZ0IsS0FBTCxHQUFhLENBQWI7QUFDQSxTQUFLTixNQUFMLEdBQWNXLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QmIsUUFBdkIsQ0FBZDs7QUFFQSxRQUFJLENBQUMsS0FBS0MsTUFBVixFQUFrQjtBQUNoQjtBQUNEOztBQUVELFNBQUssSUFBSTdCLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUd4RCxNQUFNLENBQUM4RSxPQUEzQixFQUFvQ3RCLENBQUMsRUFBckMsRUFBeUM7QUFDdkMsVUFBSXFDLE1BQU0sR0FBRyxJQUFJdEMsYUFBSixDQUFXO0FBQ3RCRyxhQUFLLEVBQUVGLENBRGU7QUFFdEJwQyxZQUFJLEVBQUUsS0FBS3VFLEtBRlc7QUFHdEIzRCxXQUFHLEVBQUUsS0FBS3FELE1BQUwsQ0FBWUksVUFBWixDQUF1QixJQUF2QjtBQUhpQixPQUFYLENBQWI7QUFNQSxXQUFLRSxLQUFMLElBQWMzRixNQUFNLENBQUNrQyxXQUFyQjtBQUNBLFdBQUs0QyxPQUFMLENBQWFsQixJQUFiLENBQWtCaUMsTUFBbEI7QUFDRDs7QUFFRCxTQUFLUixNQUFMLENBQVlhLEtBQVosQ0FBa0JQLEtBQWxCLEdBQTBCLEtBQUtBLEtBQUwsR0FBYSxJQUF2QztBQUNBLFNBQUtOLE1BQUwsQ0FBWWEsS0FBWixDQUFrQk4sTUFBbEIsR0FBMkI1RixNQUFNLENBQUNFLFlBQVAsR0FBc0IsSUFBakQ7QUFDQSxTQUFLbUYsTUFBTCxDQUFZTSxLQUFaLEdBQW9CLEtBQUtBLEtBQXpCO0FBQ0EsU0FBS04sTUFBTCxDQUFZTyxNQUFaLEdBQXFCNUYsTUFBTSxDQUFDRSxZQUE1QjtBQUVBLFNBQUt5RSxNQUFMO0FBQ0Q7Ozs7NEJBRTZCO0FBQUE7O0FBQzVCLGFBQU8sSUFBSXJFLE9BQUosQ0FBWSxVQUFBQyxPQUFPLEVBQUk7QUFDNUIsY0FBSSxDQUFDYyxLQUFMLEdBQWFFLFFBQVEsQ0FBQzRFLElBQXRCO0FBQ0EsY0FBSSxDQUFDYixtQkFBTCxHQUEyQkMsSUFBSSxDQUFDQyxHQUFMLEVBQTNCO0FBRUEsWUFBTVksUUFBaUIsR0FBRyxNQUFJLENBQUN0QixPQUFMLENBQ3ZCdUIsR0FEdUIsQ0FDbkIsVUFBQUMsR0FBRztBQUFBLGlCQUFJQSxHQUFHLENBQUNDLFNBQUosRUFBSjtBQUFBLFNBRGdCLEVBRXZCQyxNQUZ1QixDQUVoQixVQUFDQyxHQUFELEVBQU1DLFNBQU47QUFBQSxpQkFBb0JELEdBQUcsQ0FBQ0UsR0FBSixDQUFRRCxTQUFSLENBQXBCO0FBQUEsU0FGZ0IsRUFFd0IsSUFBSUUsR0FBSixFQUZ4QixFQUd2QkMsSUFIdUIsS0FHZDdHLE1BQU0sQ0FBQzhFLE9BQVAsR0FBaUI5RSxNQUFNLENBQUM4Ryx1QkFBeEIsR0FBa0QsQ0FIOUQ7QUFLQXhFLGFBQUssQ0FBQ3RDLE1BQU0sQ0FBQzZFLFNBQVIsQ0FBTCxDQUF3Qi9DLElBQXhCLENBQTZCLFlBQU07QUFDakMsZ0JBQUksQ0FBQ1QsS0FBTCxHQUFhK0UsUUFBUSxHQUFHN0UsUUFBUSxDQUFDQyxLQUFaLEdBQW9CRCxRQUFRLENBQUNHLElBQWxEOztBQUNBLGdCQUFJLENBQUNvRCxPQUFMLENBQWFQLE9BQWIsQ0FBcUIsVUFBQStCLEdBQUc7QUFBQSxtQkFBSUEsR0FBRyxDQUFDUyxJQUFKLEVBQUo7QUFBQSxXQUF4Qjs7QUFFQSxpQkFBT1gsUUFBUSxHQUFHOUQsS0FBSyxDQUFDdEMsTUFBTSxDQUFDZ0gsVUFBUixDQUFSLEdBQThCMUcsT0FBTyxDQUFDQyxPQUFSLENBQWdCLElBQWhCLENBQTdDO0FBQ0QsU0FMRCxFQUtHdUIsSUFMSCxDQUtRLFlBQU07QUFDWixnQkFBSSxDQUFDVCxLQUFMLEdBQWFFLFFBQVEsQ0FBQ0csSUFBdEI7QUFDQW5CLGlCQUFPO0FBQ1IsU0FSRDs7QUFVQSxjQUFJLENBQUNvRSxNQUFMO0FBQ0QsT0FwQk0sQ0FBUDtBQXFCRDs7Ozs7Ozs7QUNsRUg7QUFDQTtBQUVBbUIsTUFBTSxDQUFDbUIsZ0JBQVAsQ0FBd0IsTUFBeEIsRUFBZ0MsWUFBTTtBQUNwQyxNQUFNQyxFQUFFLEdBQUdsQixRQUFRLENBQUNDLGFBQVQsQ0FBdUIsUUFBdkIsQ0FBWDtBQUNBLE1BQU1rQixJQUFJLEdBQUcsSUFBSWhDLFFBQUosQ0FBUyxNQUFULENBQWI7O0FBRUEsTUFBSStCLEVBQUosRUFBUTtBQUNOQSxNQUFFLENBQUNELGdCQUFILENBQW9CLE9BQXBCLEVBQTZCLFlBQU07QUFDakNDLFFBQUUsQ0FBQ0UsUUFBSCxHQUFjLElBQWQ7QUFDQUQsVUFBSSxDQUFDMUUsS0FBTCxHQUFhWCxJQUFiLENBQWtCO0FBQUEsZUFBTW9GLEVBQUUsQ0FBQ0UsUUFBSCxHQUFjLEtBQXBCO0FBQUEsT0FBbEI7QUFDRCxLQUhEO0FBSUQ7QUFDRixDQVZEIiwiZmlsZSI6IjEyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcuanNvbidcbmltcG9ydCB7QXBwU3RhdGV9IGZyb20gJy4vYXBwJ1xuXG5jb25zdCBjb2x1bW5IZWlnaHQgPSBjb25maWcuaW1hZ2VzX2NvdW50ICogY29uZmlnLmltYWdlX2hlaWdodFxuXG5pbnRlcmZhY2UgSW1hZ2VPcHRpb25zIHtcbiAgbGVmdDogbnVtYmVyLFxuICB0b3A6IG51bWJlcixcbiAgdXJsOiBzdHJpbmcsXG4gIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEXG59XG5cbmludGVyZmFjZSBQb3NpdGlvbiB7XG4gIGxlZnQ6IG51bWJlcixcbiAgdG9wOiBudW1iZXIsXG59XG5cbmludGVyZmFjZSBJbWFnZUNhY2hlIHtcbiAgW2tleTogc3RyaW5nXTogSFRNTEltYWdlRWxlbWVudFxufVxuXG5jb25zdCBjYWNoZXM6IEltYWdlQ2FjaGUgPSB7fVxuXG5mdW5jdGlvbiBnZXRJbWFnZSh1cmw6IHN0cmluZyk6IFByb21pc2U8SFRNTEltYWdlRWxlbWVudD4ge1xuICBpZiAoY2FjaGVzW3VybF0pIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNhY2hlc1t1cmxdKVxuICB9XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKClcblxuICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgIGNhY2hlc1t1cmxdID0gaW1hZ2VcbiAgICAgIHJlcyhpbWFnZSlcbiAgICB9XG4gICAgaW1hZ2Uuc3JjID0gdXJsXG4gIH0pXG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2xvdEltYWdlIHtcbiAgcHJpdmF0ZSBvcHRpb25zOiBJbWFnZU9wdGlvbnNcbiAgcHJpdmF0ZSBzcHJpdGVQb3NpdGlvbjogbnVtYmVyID0gMFxuICBwcml2YXRlIGxhc3RVcGRhdGU6IG51bWJlciA9IDBcbiAgcHJpdmF0ZSBvZmZzZXQ6IG51bWJlciA9IDBcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBJbWFnZU9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG5cbiAgICB0aGlzLmluaXRJbWFnZSgpXG4gIH1cblxuICBwcml2YXRlIGluaXRJbWFnZSgpOiB2b2lkIHtcbiAgICBnZXRJbWFnZSh0aGlzLm9wdGlvbnMudXJsKVxuICB9XG5cbiAgcHVibGljIGdldFBvc2l0aW9uKCk6IFBvc2l0aW9uIHtcbiAgICBjb25zdCB0b3BXaXRoT2Zmc2V0ID0gKGNvbHVtbkhlaWdodCArICh0aGlzLm9wdGlvbnMudG9wIC0gdGhpcy5vZmZzZXQpICUgY29sdW1uSGVpZ2h0KSAlIGNvbHVtbkhlaWdodFxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxlZnQ6IHRoaXMub3B0aW9ucy5sZWZ0LFxuICAgICAgdG9wOiAtdG9wV2l0aE9mZnNldCArIGNvbmZpZy5pbWFnZV9oZWlnaHRcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc2V0T2Zmc2V0KG9mZnNldDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5vZmZzZXQgPSBvZmZzZXRcbiAgfVxuXG4gIHB1YmxpYyBnZXRVcmwoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnVybFxuICB9XG5cbiAgcHVibGljIHJlbmRlcihzdGF0ZTogQXBwU3RhdGUsIHRpbWU6IG51bWJlcik6IHZvaWQge1xuICAgIGlmIChzdGF0ZSA9PT0gQXBwU3RhdGUuUHJpemUpIHtcbiAgICAgIHRoaXMudXBkYXRlU3ByaXRlUG9zaXRpb24odGltZSlcbiAgICB9XG4gICAgaWYgKHN0YXRlID09PSBBcHBTdGF0ZS5TdG9wKSB7XG4gICAgICB0aGlzLnNwcml0ZVBvc2l0aW9uID0gMFxuICAgICAgdGhpcy5sYXN0VXBkYXRlID0gMFxuICAgIH1cblxuICAgIGNvbnN0IHtsZWZ0LCB0b3B9ID0gdGhpcy5nZXRQb3NpdGlvbigpXG5cbiAgICBnZXRJbWFnZSh0aGlzLm9wdGlvbnMudXJsKS50aGVuKGltZyA9PlxuICAgICAgdGhpcy5vcHRpb25zLmN0eC5kcmF3SW1hZ2UoXG4gICAgICAgIGltZyxcbiAgICAgICAgdGhpcy5zcHJpdGVQb3NpdGlvbixcbiAgICAgICAgMCxcbiAgICAgICAgY29uZmlnLmltYWdlX3dpZHRoLFxuICAgICAgICBjb25maWcuaW1hZ2VfaGVpZ2h0LFxuICAgICAgICBsZWZ0LFxuICAgICAgICB0b3AsXG4gICAgICAgIGNvbmZpZy5pbWFnZV93aWR0aCxcbiAgICAgICAgY29uZmlnLmltYWdlX2hlaWdodFxuICAgICAgKVxuICAgIClcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3ByaXRlUG9zaXRpb24odGltZTogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgbGFzdFVwZGF0ZURpZmY6IG51bWJlciA9ICh0aW1lIC0gdGhpcy5sYXN0VXBkYXRlKSAvIGNvbmZpZy5wcml6ZV9hbmltYXRpb25fc3BlZWRcblxuICAgIGlmIChsYXN0VXBkYXRlRGlmZiA+IDEpIHtcbiAgICAgIHRoaXMubGFzdFVwZGF0ZSA9IHRpbWVcbiAgICAgIHRoaXMuc3ByaXRlUG9zaXRpb24gKz0gY29uZmlnLmltYWdlX3dpZHRoXG5cbiAgICAgIGlmICh0aGlzLnNwcml0ZVBvc2l0aW9uIC8gY29uZmlnLmltYWdlX3dpZHRoID49IGNvbmZpZy5pbWFnZV9zbGlkZXNfY291bnQpIHtcbiAgICAgICAgdGhpcy5zcHJpdGVQb3NpdGlvbiA9IDBcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBkZWxheSA9ICh0aW1lOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgdGltZSkpXG59XG5cbmV4cG9ydCBjb25zdCByYW5kb20gPSAoc3RhcnQ6bnVtYmVyLCBmaW5pc2g6bnVtYmVyKTogbnVtYmVyID0+IHtcbiAgY29uc3QgcmFuZ2UgPSBmaW5pc2ggLSBzdGFydDtcblxuICByZXR1cm4gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogcmFuZ2UpICsgc3RhcnRcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNYXA8VD4ge1xuICBba2V5OiBzdHJpbmddOiBudW1iZXJcbn1cbiIsImltcG9ydCBTbG90SW1hZ2UgZnJvbSAnLi9pbWFnZSdcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnLmpzb24nXG5pbXBvcnQge0FwcFN0YXRlfSBmcm9tICcuL2FwcCdcbmltcG9ydCB7TWFwLCByYW5kb219IGZyb20gJy4vdXRpbHMnXG5pbXBvcnQgZWFzaW5nIGZyb20gJ2Vhc2VzL3F1YXJ0LW91dCdcblxuY29uc3QgY29udGV4dCA9IHJlcXVpcmUuY29udGV4dCgnLi9pbWFnZXMnLCBmYWxzZSwgLy4rXFwucG5nJC8pXG5jb25zdCBpbWFnZXMgPSBjb250ZXh0LmtleXMoKVxuY29uc3QgaW1hZ2VDb3VudCA9IE1hdGguY2VpbChjb25maWcuaW1hZ2VzX2NvdW50IC8gaW1hZ2VzLmxlbmd0aClcbmNvbnN0IGNvbHVtbkhlaWdodCA9IGNvbmZpZy5pbWFnZXNfY291bnQgKiBjb25maWcuaW1hZ2VfaGVpZ2h0XG5jb25zdCBvdmVyYWxsRGlzdGFuY2UgPSBjb2x1bW5IZWlnaHQgKiBjb25maWcubG9vcHNcblxuaW50ZXJmYWNlIENvbHVtbk9wdGlvbnMge1xuICBpbmRleDogbnVtYmVyXG4gIGxlZnQ6IG51bWJlcjtcbiAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkRcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sdW1uIHtcbiAgcHJpdmF0ZSBpdGVtczogU2xvdEltYWdlW10gPSBbXVxuICBwcml2YXRlIG5vdEZpbGxlZDogTWFwPG51bWJlcj4gPSB7fVxuICBwcml2YXRlIHJlc3VsdDogbnVtYmVyID0gMVxuICBwcml2YXRlIHJlc3VsdE9mZnNldDogbnVtYmVyID0gMFxuICBwcml2YXRlIGluZGV4OiBudW1iZXJcbiAgcHJpdmF0ZSBzdGFydE9mZnNldDogbnVtYmVyID0gMFxuXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihvcHRpb25zOiBDb2x1bW5PcHRpb25zKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbWFnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMubm90RmlsbGVkW2ltYWdlc1tpXV0gPSAwXG4gICAgfVxuXG4gICAgdGhpcy5pbmRleCA9IG9wdGlvbnMuaW5kZXhcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uZmlnLmltYWdlc19jb3VudDsgaSsrKSB7XG4gICAgICB0aGlzLml0ZW1zLnB1c2goXG4gICAgICAgIG5ldyBTbG90SW1hZ2Uoe1xuICAgICAgICAgIGxlZnQ6IG9wdGlvbnMubGVmdCxcbiAgICAgICAgICB0b3A6IGkgKiBjb25maWcuaW1hZ2VfaGVpZ2h0LFxuICAgICAgICAgIHVybDogY29udGV4dCh0aGlzLmdldEltYWdlTmFtZSgpKSxcbiAgICAgICAgICBjdHg6IG9wdGlvbnMuY3R4XG4gICAgICAgIH0pXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRJbWFnZU5hbWUoKTogc3RyaW5nIHtcbiAgICBsZXQgbm90RmlsbGVkS2V5cyA9IE9iamVjdC5rZXlzKHRoaXMubm90RmlsbGVkKVxuICAgIGxldCBpbmRleCA9IHJhbmRvbSgwLCBub3RGaWxsZWRLZXlzLmxlbmd0aCAtIDEpXG4gICAgbGV0IGltYWdlTmFtZSA9IG5vdEZpbGxlZEtleXNbaW5kZXhdXG5cbiAgICB0aGlzLm5vdEZpbGxlZFtpbWFnZU5hbWVdKytcblxuICAgIGlmICh0aGlzLm5vdEZpbGxlZFtpbWFnZU5hbWVdID49IGltYWdlQ291bnQpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLm5vdEZpbGxlZFtpbWFnZU5hbWVdXG4gICAgfVxuXG4gICAgcmV0dXJuIGltYWdlTmFtZVxuICB9XG5cbiAgcHVibGljIGdldFJlc3VsdCgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHByZXZSZXN1bHQgPSB0aGlzLnJlc3VsdFxuXG4gICAgdGhpcy5yZXN1bHQgPSByYW5kb20oMCwgY29uZmlnLmltYWdlc19jb3VudCAtIDEpXG4gICAgdGhpcy5yZXN1bHRPZmZzZXQgPSAodGhpcy5yZXN1bHQgLSBwcmV2UmVzdWx0KSAqIGNvbmZpZy5pbWFnZV9oZWlnaHRcblxuICAgIHJldHVybiB0aGlzLml0ZW1zW3RoaXMucmVzdWx0XS5nZXRVcmwoKVxuICB9XG5cbiAgcHVibGljIHN0b3AoKTogdm9pZCB7XG4gICAgdGhpcy5zdGFydE9mZnNldCArPSB0aGlzLnJlc3VsdE9mZnNldFxuICAgIHRoaXMucmVzdWx0T2Zmc2V0ID0gMFxuICB9XG5cbiAgcHVibGljIHJlbmRlcihzdGF0ZTogQXBwU3RhdGUsIHRpbWU6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IG9mZnNldCA9IHRoaXMuZ2V0T2Zmc2V0KHRpbWUpXG5cbiAgICB0aGlzLml0ZW1zLmZvckVhY2goKGl0ZW0sIGkpID0+IHtcbiAgICAgIGl0ZW0uc2V0T2Zmc2V0KG9mZnNldClcbiAgICAgIGlmICh0aGlzLm5lZWRUb1JlbmRlckl0ZW0oaXRlbSkpIHtcbiAgICAgICAgaXRlbS5yZW5kZXIoXG4gICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgdGltZVxuICAgICAgICApXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHByaXZhdGUgZ2V0T2Zmc2V0KHRpbWU6IG51bWJlcik6IG51bWJlciB7XG4gICAgbGV0IG92ZXJhbGxUaW1lID0gdGltZSAvIChjb25maWcuc3Bpbl90aW1lIC0gKGNvbmZpZy5jb2x1bW5zIC0gdGhpcy5pbmRleCAtIDEpICogY29uZmlnLmNvbHVtbnNfc3RvcF9kZWxheSlcblxuICAgIGlmIChvdmVyYWxsVGltZSA+IDEpIHtcbiAgICAgIG92ZXJhbGxUaW1lID0gMVxuICAgIH1cblxuICAgIHJldHVybiAodGhpcy5zdGFydE9mZnNldCArIChvdmVyYWxsRGlzdGFuY2UgKyB0aGlzLnJlc3VsdE9mZnNldCkgKiAgZWFzaW5nKG92ZXJhbGxUaW1lKSkgJSBjb2x1bW5IZWlnaHRcbiAgfVxuXG4gIHByaXZhdGUgbmVlZFRvUmVuZGVySXRlbShpdGVtOiBTbG90SW1hZ2UpOiBib29sZWFuIHtcbiAgICBjb25zdCB7dG9wfSA9IGl0ZW0uZ2V0UG9zaXRpb24oKVxuXG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuaXNQb2ludFZpc2libGUodG9wKSB8fFxuICAgICAgdGhpcy5pc1BvaW50VmlzaWJsZSh0b3AgKyBjb25maWcuaW1hZ2VfaGVpZ2h0IC0gMSlcbiAgICApXG4gIH1cblxuICBwcml2YXRlIGlzUG9pbnRWaXNpYmxlKHk6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB5ID49IDAgJiYgeSA8IGNvbmZpZy5pbWFnZV9oZWlnaHRcbiAgfVxufVxuIiwiaW1wb3J0IENvbHVtbiBmcm9tICcuL2NvbHVtbidcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnLmpzb24nXG5pbXBvcnQge2RlbGF5fSBmcm9tICcuL3V0aWxzJ1xuXG5leHBvcnQgZW51bSBBcHBTdGF0ZSB7XG4gIFN0b3AgPSAnc3RvcCcsXG4gIFNwaW4gPSAnc3BpbicsXG4gIFByaXplID0gJ3ByaXplJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2xvdCB7XG4gIHByaXZhdGUgY29sdW1uczogQ29sdW1uW10gPSBbXVxuICBwcml2YXRlIHdpZHRoOiBudW1iZXJcbiAgcHJpdmF0ZSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50IHwgbnVsbFxuICBwcml2YXRlIHN0YXRlOiBBcHBTdGF0ZSA9IEFwcFN0YXRlLlN0b3BcbiAgcHJpdmF0ZSBwaGFzZVN0YXJ0VGltZXN0YW1wOiBudW1iZXIgPSAwXG5cbiAgY29uc3RydWN0b3Ioc2VsZWN0b3I6IHN0cmluZykge1xuICAgIHRoaXMud2lkdGggPSAwXG4gICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKVxuXG4gICAgaWYgKCF0aGlzLmNhbnZhcykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb25maWcuY29sdW1uczsgaSsrKSB7XG4gICAgICBsZXQgY29sdW1uID0gbmV3IENvbHVtbih7XG4gICAgICAgIGluZGV4OiBpLFxuICAgICAgICBsZWZ0OiB0aGlzLndpZHRoLFxuICAgICAgICBjdHg6IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJykhLFxuICAgICAgfSlcblxuICAgICAgdGhpcy53aWR0aCArPSBjb25maWcuaW1hZ2Vfd2lkdGhcbiAgICAgIHRoaXMuY29sdW1ucy5wdXNoKGNvbHVtbilcbiAgICB9XG5cbiAgICB0aGlzLmNhbnZhcy5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKyAncHgnXG4gICAgdGhpcy5jYW52YXMuc3R5bGUuaGVpZ2h0ID0gY29uZmlnLmltYWdlX2hlaWdodCArICdweCdcbiAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMud2lkdGhcbiAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSBjb25maWcuaW1hZ2VfaGVpZ2h0XG5cbiAgICB0aGlzLnJlbmRlcigpXG4gIH1cblxuICBwdWJsaWMgc3RhcnQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgdGhpcy5zdGF0ZSA9IEFwcFN0YXRlLlNwaW5cbiAgICAgIHRoaXMucGhhc2VTdGFydFRpbWVzdGFtcCA9IERhdGUubm93KClcblxuICAgICAgY29uc3QgaGFzUHJpemU6IGJvb2xlYW4gPSB0aGlzLmNvbHVtbnNcbiAgICAgICAgLm1hcChjb2wgPT4gY29sLmdldFJlc3VsdCgpKVxuICAgICAgICAucmVkdWNlKChhY2MsIGNvbFJlc3VsdCkgPT4gYWNjLmFkZChjb2xSZXN1bHQpLCBuZXcgU2V0KCkpXG4gICAgICAgIC5zaXplID09PSBjb25maWcuY29sdW1ucyAtIGNvbmZpZy5uZWVkX3NhbWVfaW1hZ2VzX3RvX3dpbiArIDFcblxuICAgICAgZGVsYXkoY29uZmlnLnNwaW5fdGltZSkudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBoYXNQcml6ZSA/IEFwcFN0YXRlLlByaXplIDogQXBwU3RhdGUuU3RvcFxuICAgICAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaChjb2wgPT4gY29sLnN0b3AoKSlcblxuICAgICAgICByZXR1cm4gaGFzUHJpemUgPyBkZWxheShjb25maWcucHJpemVfdGltZSkgOiBQcm9taXNlLnJlc29sdmUobnVsbClcbiAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLnN0YXRlID0gQXBwU3RhdGUuU3RvcFxuICAgICAgICByZXNvbHZlKClcbiAgICAgIH0pXG5cbiAgICAgIHRoaXMucmVuZGVyKClcbiAgICB9KVxuICB9XG5cbiAgcHVibGljIHJlbmRlciA9ICgpOiB2b2lkID0+IHtcbiAgICBpZiAoIXRoaXMuY2FudmFzKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCB0aW1lID0gdGhpcy5waGFzZVN0YXJ0VGltZXN0YW1wID8gRGF0ZS5ub3coKSAtIHRoaXMucGhhc2VTdGFydFRpbWVzdGFtcCA6IDBcbiAgICBjb25zdCBjdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpIVxuXG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KVxuXG4gICAgdGhpcy5jb2x1bW5zLmZvckVhY2goY29sdW1uID0+IGNvbHVtbi5yZW5kZXIodGhpcy5zdGF0ZSwgdGltZSkpXG5cbiAgICBpZiAodGhpcy5zdGF0ZSAhPT0gQXBwU3RhdGUuU3RvcCkge1xuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJlbmRlcilcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCAnLi9zdHlsZXMuc2NzcydcbmltcG9ydCBTbG90IGZyb20gJy4vYXBwL2FwcCdcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uJylcbiAgY29uc3Qgc2xvdCA9IG5ldyBTbG90KCcjYXBwJylcblxuICBpZiAoZWwpIHtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGVsLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHNsb3Quc3RhcnQoKS50aGVuKCgpID0+IGVsLmRpc2FibGVkID0gZmFsc2UpXG4gICAgfSlcbiAgfVxufSlcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///12\n')}]);